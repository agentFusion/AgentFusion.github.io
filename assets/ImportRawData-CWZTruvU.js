import{j as e,U as B,r as h,B as g,R as n,T as S,t,b as k,V as O,W as D,X as I,Y as q,Z as V,D as T,_ as z,$ as X,l as U,a0 as Y,a1 as E,p as Z,a2 as G,S as K,a3 as Q,h as P,C as M,a4 as R}from"./osRouter-CzzlJ7Ez.js";import{S as _,H as $}from"./Hint-hTwf5wyO.js";import{R as F}from"./ResponsiblePage--ek9fNjC.js";import{T as d}from"./TextInput-BeCEiALM.js";import{F as y}from"./FileSelector-xqa5lfy1.js";import"./index-BwzbyBLz.js";import"./AnimatedBox-DH0xIEE8.js";function N(){return e.jsx(B,{})}const p=({userDataHaveId:l,withUi:s,chunkingMode:x})=>{const[o,f]=h.useState(null),[a,j]=h.useState(null),[r,v]=h.useState({title:"title",content:"content",tags:"tags",img:"img",id:"id"}),[c,m]=h.useState({from:"from",to:"to",relation:"relation"});return e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsx(n,{children:e.jsx(S,{children:t("fileds will be mapped like this:")})}),l&&e.jsx(n,{children:e.jsx(d,{label:t("id field from "),value:r==null?void 0:r.id,onChangeText:i=>v({...r,id:i})})}),e.jsx(n,{children:e.jsx(d,{label:t("title field from "),value:r==null?void 0:r.title,onChangeText:i=>v({...r,title:i})})}),e.jsx(n,{children:e.jsx(d,{label:t("content field from "),value:r==null?void 0:r.content,onChangeText:i=>v({...r,content:i})})}),e.jsx(n,{children:e.jsx(d,{label:t("tags field from "),value:r==null?void 0:r.tags,onChangeText:i=>v({...r,tags:i})})}),e.jsx(n,{children:e.jsx(d,{label:t("img field from "),value:r==null?void 0:r.img,onChangeText:i=>v({...r,img:i})})})]}),e.jsxs(g,{children:[e.jsx(n,{children:e.jsx(S,{children:t("edges fileds will be mapped like this:")})}),e.jsx(n,{children:e.jsx(d,{label:t("source field name"),value:c==null?void 0:c.from,onChangeText:i=>m({...c,from:i})})}),e.jsx(n,{children:e.jsx(d,{label:t("destination field name "),value:c==null?void 0:c.to,onChangeText:i=>m({...c,to:i})})}),e.jsx(n,{children:e.jsx(d,{label:"relation field name ",value:c==null?void 0:c.relation,onChangeText:i=>m({...c,relation:i})})})]}),e.jsxs(n,{sortItems:!0,children:[e.jsx(y,{icon:"import",style:{maxWidth:200},tmpFileName:"file1",onFileSelect_:i=>{f(i)},children:t("load nodes")}),e.jsx(y,{icon:"import",style:{maxWidth:200},tmpFileName:"file2",onFileSelect_:i=>{j(i)},children:t("load edges")})]}),e.jsx(k,{onPress:async()=>{O({text:await D(o),text2:await D(a),userInputs:{mappingFileds_edges:c,mappingFileds_withoutParentId:r,userDataHaveId:l,withUi:s,chunkingMode:x}})},children:t("start importing")})]})},ee=({userDataHaveId:l,mappingFileds:s,set_mappingFileds:x})=>e.jsxs(e.Fragment,{children:[e.jsx(n,{children:e.jsx(S,{children:t("fileds will be mapped like this:")})}),l&&e.jsx(n,{children:e.jsx(I,{label:t("id field from "),value:s==null?void 0:s.id,onChangeText:o=>x({...s,id:o})})}),e.jsx(n,{children:e.jsx(I,{label:t("title field from "),value:s==null?void 0:s.title,onChangeText:o=>x({...s,title:o})})}),e.jsx(n,{children:e.jsx(I,{label:t("content field from "),value:s==null?void 0:s.content,onChangeText:o=>x({...s,content:o})})}),e.jsx(n,{children:e.jsx(I,{label:t("tags field from "),value:s==null?void 0:s.tags,onChangeText:o=>x({...s,tags:o})})}),e.jsx(n,{children:e.jsx(I,{label:t("img field from "),value:s==null?void 0:s.img,onChangeText:o=>x({...s,img:o})})}),e.jsx(n,{children:e.jsx(I,{label:t("parent field from"),value:s==null?void 0:s.parents_id,onChangeText:o=>x({...s,parents_id:o})})}),e.jsx(n,{children:e.jsx(I,{label:t("parent field from"),value:s==null?void 0:s.parents_rel,onChangeText:o=>x({...s,parents_rel:o})})})]}),te=({userDataHaveId:l,withUi:s,chunkingMode:x})=>{const[o,f]=h.useState(null),[a,j]=h.useState({id:"id",title:"title",content:"content",tags:"tags",img:"img",parents_id:"parents_id",parents_rel:"parents_rel"});return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(ee,{userDataHaveId:l,mappingFileds:a,set_mappingFileds:j})}),e.jsx(n,{sortItems:!0,children:e.jsx(y,{icon:"import",style:{maxWidth:200},accept:"csv",tmpFileName:"file1",onFileSelect_:r=>{f(r)},children:t("select the file")})}),e.jsx(k,{onPress:async()=>{q({text:await D(o),userInputs:{mappingFileds:a,userDataHaveId:l,withUi:s,chunkingMode:x}})},children:t("start importing")})]})},se=({userDataHaveId:l,withUi:s,chunkingMode:x})=>{const[o,f]=h.useState(null),[a,j]=h.useState({id:"id",title:"title",content:"content",tags:"tags",img:"img",children:"children"});return e.jsx(e.Fragment,{children:e.jsxs(g,{children:[e.jsx(n,{children:e.jsx(S,{children:t("fileds will be mapped like this:")})}),l&&e.jsx(n,{children:e.jsx(d,{label:t("id field from "),value:a==null?void 0:a.id,onChangeText:r=>j({...a,id:r})})}),e.jsx(n,{children:e.jsx(d,{label:t("title field from "),value:a==null?void 0:a.title,onChangeText:r=>j({...a,title:r})})}),e.jsx(n,{children:e.jsx(d,{label:t("content field from "),value:a==null?void 0:a.content,onChangeText:r=>j({...a,content:r})})}),e.jsx(n,{children:e.jsx(d,{label:t("tags field from "),value:a==null?void 0:a.tags,onChangeText:r=>j({...a,tags:r})})}),e.jsx(n,{children:e.jsx(d,{label:t("img field from "),value:a==null?void 0:a.img,onChangeText:r=>j({...a,img:r})})}),e.jsx(n,{children:e.jsx(d,{label:t("children field from"),value:a==null?void 0:a.children,onChangeText:r=>j({...a,children:r})})}),e.jsx(n,{sortItems:!0,children:e.jsx(y,{icon:"import",style:{maxWidth:200},accept:"json",tmpFileName:"file1",onFileSelect_:r=>{f(r)},children:t("select the file")})}),e.jsx(k,{onPress:async()=>{V({text:await D(o),userInputs:{mappingFileds_multilevel:a,userDataHaveId:l,withUi:s,chunkingMode:x}})},children:t("start importing")})]})})},ne=({userDataHaveId:l,withUi:s,chunkingMode:x})=>{const[o,f]=h.useState(!1),[a,j]=h.useState(null),[r,v]=h.useState(null),[c,m]=h.useState({title:"title",content:"content",tags:"tags",img:"img",id:"id"}),[i,A]=h.useState({from:"from",to:"to",relation:"relation"});return e.jsxs(e.Fragment,{children:[e.jsxs(n,{sortItems:!0,children:[e.jsxs(g,{children:[e.jsx(n,{children:e.jsx(S,{children:t("fileds will be mapped like this:")})}),l&&e.jsx(n,{children:e.jsx(d,{label:t("id field from "),value:c==null?void 0:c.id,onChangeText:u=>m({...c,id:u})})}),e.jsx(n,{children:e.jsx(d,{label:t("title field from "),value:c==null?void 0:c.title,onChangeText:u=>m({...c,title:u})})}),e.jsx(n,{children:e.jsx(d,{label:t("content field from "),value:c==null?void 0:c.content,onChangeText:u=>m({...c,content:u})})}),e.jsx(n,{children:e.jsx(d,{label:t("tags field from "),value:c==null?void 0:c.tags,onChangeText:u=>m({...c,tags:u})})}),e.jsx(n,{children:e.jsx(d,{label:t("img field from "),value:c==null?void 0:c.img,onChangeText:u=>m({...c,img:u})})})]}),e.jsxs(g,{children:[e.jsx(n,{children:e.jsx(S,{children:t("edges fileds will be mapped like this:")})}),e.jsx(n,{children:e.jsx(d,{label:t("source field name"),value:i==null?void 0:i.from,onChangeText:u=>A({...i,from:u})})}),e.jsx(n,{children:e.jsx(d,{label:t("destination field name "),value:i==null?void 0:i.to,onChangeText:u=>A({...i,to:u})})}),e.jsx(n,{children:e.jsx(d,{label:"relation field name ",value:i==null?void 0:i.relation,onChangeText:u=>A({...i,relation:u})})})]})]}),e.jsx(T,{}),e.jsx(_,{testID:"nodesAndEdgesAreInTheSameFile",text:t("nodes And Edges Are In The Same File?"),items:[{name:"no",title:t("no"),callback:()=>{f(!1)}},{name:"yes",title:t("yes"),callback:()=>{f(!0)}}],default:"no"}),o&&e.jsx(n,{sortItems:!0,children:e.jsx(y,{icon:"import",style:{maxWidth:200},tmpFileName:"file1",onFileSelect_:u=>{v(u)},children:t("load edges")})}),!o&&e.jsxs(n,{sortItems:!0,children:[e.jsx(y,{icon:"import",style:{maxWidth:200},tmpFileName:"file1",onFileSelect_:u=>{j(u)},children:t("load nodes")}),e.jsx(y,{icon:"import",style:{maxWidth:200},tmpFileName:"file2",onFileSelect_:u=>{v(u)},children:t("load edges")})]}),e.jsx(T,{}),e.jsx(k,{testID:"startImporting",onPress:async()=>{let u=null,w=null;globalThis!=null&&globalThis.Cypress?(u=await(await fetch("testing/bigCorps_nodes.json")).text(),w=await(await fetch("testing/bigCorps_edges.json")).text()):(u=o?null:await D(a),w=await D(r)),await z({text:u,text2:w,alreadyParsed:!1,userInputs:{mappingFileds_edges:i,mappingFileds_withoutParentId:c,nodesAndEdgesAreInTheSameFile:o,userDataHaveId:l,chunkingMode:x,withUi:s}})},children:t("start importing")})]})},le=({userDataHaveId:l,mappingFileds:s,set_mappingFileds:x})=>e.jsxs(e.Fragment,{children:[e.jsx(n,{children:e.jsx(S,{children:t("fileds will be mapped like this:")})}),l&&e.jsx(n,{children:e.jsx(d,{label:t("id field from "),value:s==null?void 0:s.id,onChangeText:o=>x({...s,id:o})})}),e.jsx(n,{children:e.jsx(d,{label:t("title field from "),value:s==null?void 0:s.title,onChangeText:o=>x({...s,title:o})})}),e.jsx(n,{children:e.jsx(d,{label:t("content field from "),value:s==null?void 0:s.content,onChangeText:o=>x({...s,content:o})})}),e.jsx(n,{children:e.jsx(d,{label:t("tags field from "),value:s==null?void 0:s.tags,onChangeText:o=>x({...s,tags:o})})}),e.jsx(n,{children:e.jsx(d,{label:t("img field from "),value:s==null?void 0:s.img,onChangeText:o=>x({...s,img:o})})}),e.jsx(n,{children:e.jsx(d,{label:t("parent field from"),value:s==null?void 0:s.parents_id,onChangeText:o=>x({...s,parents_id:o})})}),e.jsx(n,{children:e.jsx(d,{label:t("parent field from"),value:s==null?void 0:s.parents_rel,onChangeText:o=>x({...s,parents_rel:o})})})]}),oe=({userDataHaveId:l,withUi:s,chunkingMode:x})=>{const[o,f]=h.useState(null),[a,j]=h.useState({id:"id",title:"title",content:"content",tags:"tags",img:"img",parents_id:"parents_id",parents_rel:"parents_rel"});return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(le,{userDataHaveId:l,mappingFileds:a,set_mappingFileds:j})}),e.jsx(n,{sortItems:!0,children:e.jsx(y,{icon:"import",style:{maxWidth:200},onFileSelect_:r=>{f(r)},children:t("select the file")})}),e.jsx(k,{onPress:async()=>{X({text:await D(o),userInputs:{mappingFileds:a,userDataHaveId:l,withUi:s,chunkingMode:x}})},children:t("start importing")})]})};function re({withUi:l,chunkingMode:s}){const[x,o]=h.useState(U.draggedFile),[f,a]=h.useState("");return e.jsx(e.Fragment,{children:e.jsxs(g,{children:[e.jsx($,{children:t(" NOTE: you are importing raw data ....")}),e.jsx(T,{}),e.jsx(d,{mode:"flat",label:t("file structure description"),value:f,onChangeText:j=>a(j)}),e.jsx($,{children:t("some description to help Ai...")}),e.jsx(T,{}),e.jsx(n,{sortItems:!0,children:e.jsx(y,{icon:"import",style:{maxWidth:200},tmpFileName:"file1",onFileSelect_:j=>{o(j)},children:t("select the file")})}),e.jsx(k,{disabled:!x,onPress:async()=>{Y({selectedFile:x,withUi:l,userInputs:{userDescriptionAboutThisFile:f,chunkingMode:s}})},children:t("start importing")})]})})}const ae={Json_multiLevel_onlyNodes:l=>e.jsx(h.Suspense,{fallback:e.jsx(E,{}),children:e.jsx(se,{userDataHaveId:l.userDataHaveId,withUi:l.withUi,chunkingMode:l.chunkingMode})}),Json_singleLevel_onlyNodes:l=>e.jsx(h.Suspense,{fallback:e.jsx(E,{}),children:e.jsx(oe,{userDataHaveId:l.userDataHaveId,withUi:l.withUi,chunkingMode:l.chunkingMode})}),Csv_onlyNodes:l=>e.jsx(h.Suspense,{fallback:e.jsx(E,{}),children:e.jsx(te,{userDataHaveId:l.userDataHaveId,withUi:l.withUi,chunkingMode:l.chunkingMode})}),Csv_nodesAndEdges:l=>e.jsx(h.Suspense,{fallback:e.jsx(E,{}),children:e.jsx(p,{userDataHaveId:l.userDataHaveId,withUi:l.withUi,chunkingMode:l.chunkingMode})}),Json_singleLevel_nodesAndEdges:l=>e.jsx(h.Suspense,{fallback:e.jsx(E,{}),children:e.jsx(ne,{userDataHaveId:l.userDataHaveId,withUi:l.withUi,chunkingMode:l.chunkingMode})}),Unstructured:l=>e.jsxs(h.Suspense,{fallback:e.jsx(E,{}),children:[" ",e.jsx(re,{withUi:l.withUi,chunkingMode:l.chunkingMode})]})},be=function(){const[l,s]=h.useState([]),[x,o]=h.useState(null),[f,a]=h.useState(!1),[j,r]=h.useState(Z("localAppSetting").chunkingMode),[v,c]=h.useState(!U.draggedFile),[m,i]=h.useState(!1),[A,u]=h.useState(!0),[w,L]=h.useState("json"),[W,H]=h.useState("singleLevel"),b=()=>{o(null),s([])};return e.jsx(e.Fragment,{children:e.jsxs(F,{children:[e.jsxs(g,{style:{padding:20,alignContent:"center"},children:[e.jsx(_,{text:t("the format of the file :"),testID:"formatOfTheFile",items:[{name:"structured",title:t("structured"),hint:"e.g json",callback:()=>{b(),c(!0)}},{name:"un_structured",title:t("un_structured"),hint:"e.g txt",disabled:!1,callback:()=>{b(),c(!1)}}],default:v?"structured":"un_structured"}),e.jsx(_,{text:t("visualizing while importing or not :"),testID:"visualizion",items:[{name:"with ui",title:t("with ui"),hint:t("slow"),callback:()=>{b(),a(!0)}},{name:"without ui",title:t("without ui"),hint:t("fast"),callback:()=>{b(),a(!1)}}],default:f?"with ui":"without ui"}),e.jsx(_,{text:t("chunking mode:"),testID:"chunkingMode",items:[{name:"static",title:t("static"),hint:t("fast/low quality"),callback:()=>{b(),r("static")}},{name:"semantic",title:t("semantic"),hint:t("medium speed and good quality"),callback:()=>{b(),r("semantic")}},{name:"contexual",title:t("contexual"),hint:t("slower but highest quality"),disabled:!0,callback:()=>{b(),r("contexual")}}],default:j}),v&&e.jsxs(e.Fragment,{children:[e.jsx(_,{testID:"idAvalibility",text:t("does your data have Id ?..."),items:[{name:"yes",title:t("yes"),callback:()=>{b(),u(!0)}},{name:"no",title:t("no"),callback:()=>{b(),u(!1)}}],default:A?"yes":"no"}),e.jsx(_,{text:t("the extension of the file:"),testID:"fileExtension",items:[{name:"json",title:"json",callback:()=>{b(),L("json")}},{name:"csv",title:"csv",disabled:!0,callback:()=>{b(),L("csv")}}],default:w}),e.jsx(_,{text:t("what do you have?"),testID:"dataAvalability",items:[{name:"nodes And Edges",title:t("nodes And Edges"),callback:()=>{b(),i(!0)}},{name:"only nodes",title:t("only nodes"),callback:()=>{b(),i(!1)}}],default:m?"nodes And Edges":"only nodes"}),w==="json"&&!m&&e.jsx(_,{text:t("the structure of the json:"),testID:"jsonStructure",items:[{name:"singleLevel",title:t("singleLevel"),callback:()=>{b(),H("singleLevel")}},{name:"multiLevel",title:t("multiLevel"),disabled:!0,callback:()=>{b(),H("multiLevel")}}],default:W})]}),e.jsx(k,{testID:"importerPluginRecommender",onPress:async()=>{const C=await G({userInputs:{chunkingMode:j,fileExtention:w,json_structure:W,structure:v,nodesAndEdges:m}});s(C)},children:t("recommend an importer plugin")}),e.jsx(T,{}),l.length>0&&e.jsx(S,{children:t("select one of the suggested modes:")}),e.jsx(T,{}),e.jsx(K,{height:300,children:l.length>0&&l.map((C,J)=>e.jsx(Q.Fragment,{children:e.jsx(P,{style:{backgroundColor:U.configs.colors.userInputs,borderWidth:2,borderStyle:"dotted",borderColor:"black",margin:5,padding:5,overflow:"hidden",height:200},onPress:ce=>{R({title:null,content:C.explanation,height:400,dontCenterText:!0})},children:e.jsx(M,{children:e.jsxs(n,{style:{minHeight:200},children:[e.jsxs(M,{style:{},children:[e.jsx(S,{children:C.name}),e.jsx(T,{}),e.jsx(S,{style:{marginLeft:10},children:C.explanation})]}),e.jsxs(M,{style:{position:"absolute",top:25,right:1},children:[e.jsx(k,{mode:"text",testID:`${C.name}_seeMore`,onPress:()=>R({title:null,content:C.explanation,height:400,dontCenterText:!0}),children:t("see more...")}),e.jsx(k,{testID:`${C.name}_select`,mode:"text",onPress:()=>o(C),children:t("select")})]})]})})})},J))}),e.jsx(T,{}),e.jsx(T,{}),!!(x!=null&&x.name)&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{children:[t("selected mode:")," ",x.name]}),ae[x.name]({chunkingMode:j,userDataHaveId:A,withUi:f})]}),e.jsx(N,{}),e.jsx(N,{}),e.jsx(N,{})]}),e.jsx(T,{})]})})};export{be as ImportRawData};
