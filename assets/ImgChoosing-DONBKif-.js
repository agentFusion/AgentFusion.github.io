import{r as d,j as e,B as h,R as m,d as u,t as s,l as c,a as y,h as f,P as _,e as g,Q as v,S as k,D,U,V as B,z as P,m as V}from"./osRouter-Bk4NCNve.js";import{S as b}from"./SaveBox-CgIQnLrP.js";import{F as W}from"./FileSelector-CLRhLI_r.js";function O(t){const[l,i]=d.useState(""),[o,r]=d.useState(""),[n,x]=d.useState(structuredClone(t.default_customFields_user)),[S,I]=d.useState(""),C=()=>{if(!l||!o){I(s("Please enter both key and value."));return}if(n.hasOwnProperty(l)){I(s("This key already exists. Please use a different key."));return}x(a=>{const j={...a,[l]:o};return t.onUpdate(j),j}),i(""),r(""),I("")},w=a=>{x(j=>{const p={...j};return delete p[a],t.onUpdate(p),p})},F=()=>{x({}),t.onUpdate({})};return e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:s("Custom Fields(to improve search)")})}),e.jsx(b,{testID:"customFieldManipulator_key",label:s("Enter key"),defaultValue:l,onSave:i}),e.jsx(b,{testID:"customFieldManipulator_val",label:s("Enter value"),defaultValue:o,onSave:r}),e.jsxs(m,{children:[e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{})]}),e.jsxs(m,{children:[e.jsx(c,{children:e.jsx(y,{testID:"customFieldManipulator_add",icon:"link-plus",onPress:C,children:s("Add")})}),e.jsx(c,{children:e.jsx(y,{testID:"customFieldManipulator_reset",icon:"delete",onPress:F,children:s("Reset")})})]}),S?e.jsx(u,{style:R.error,children:S}):null,Object.entries(n).length>0?Object.entries(n).map(a=>e.jsx(h,{children:e.jsxs(m,{style:{borderBottomColor:"black",borderBottomWidth:1},children:[e.jsx(c,{style:{width:150},children:e.jsxs(u,{children:[a[0],": ",a[1]]})}),e.jsx(c,{children:e.jsx(y,{testID:"customFieldManipulator_del",icon:"minus-box",onPress:()=>w(a[0]),children:s("del")})})]})},a[0])):e.jsx(u,{children:s("No entries added yet.")})]})}const R={error:{color:"red",marginBottom:10}};function M(t){const[l,i]=d.useState(t.defaultSelected),o=d.useMemo(()=>e.jsx(e.Fragment,{children:t.imagesList.map((r,n)=>e.jsx(d.Fragment,{children:e.jsx(f,{style:{borderColor:_,borderWidth:1,width:50,height:50},onPress:()=>{t.onImgChange({img:r}),i(x=>r)},children:e.jsx(g,{width:50,height:50,src:r})})},r))}),[t.imagesList.length]);return e.jsxs(v,{children:[e.jsx(g,{width:50,height:50,src:l}),e.jsxs(k,{height:100,style:{borderColor:"black",borderWidth:1},children:[e.jsx(u,{children:s("or choose one of below images ")}),e.jsx(m,{testID:"addMem_imgs",style:{width:300,display:"flex",justifyContent:"space-evenly",alignItems:"center",alignContent:"center",flexWrap:"wrap"},children:o})]})]})}function N(t){const[l,i]=d.useState(null),[o,r]=d.useState(null);return e.jsxs(h,{style:{display:"flex",flexDirection:"column",width:"100%"},children:[e.jsxs(u,{children:[s("choose the mem image:")," "]}),e.jsx(D,{}),e.jsxs(h,{style:{borderColor:"black",borderWidth:1},children:[e.jsx(b,{label:s("type the image url..."),defaultValue:o?.startsWith("images/")||o?.startsWith("icons/")?"":o,keyboardType:"numeric",onSave:n=>{i(null),t.onImgSelect(null),t.onImgUrlChanged(n),r(n)}}),e.jsxs(h,{style:{display:"flex",flexDirection:V.smallScreen?"column":"row"},children:[e.jsx(M,{defaultSelected:t.currentImg,imagesList:U.allImgs,onImgChange:({img:n})=>{i(null),t.onImgSelect(null),t.onImgUrlChanged(n),r(n)}}),e.jsxs(h,{style:{alignSelf:"center",alignItems:"center",height:100,borderColor:"black",borderWidth:3},children:[e.jsx(W,{icon:"image",accept:"png",tmpFileName:"imgChoosing_img.png",onFileSelect_:async n=>{setTimeout(()=>{i(n),t.onImgSelect(n),t.onImgUrlChanged(null),r(null)},1e3)},children:s("or select image")}),!!l&&e.jsx(g,{style:{border:"solid  2px green"},width:50,height:50,src:typeof l=="string"?l:URL.createObjectURL(l),dontResolve:!0})]}),e.jsx(h,{sortItems:!0,children:!!t.oldImg&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{children:["  ",s("original image")," "]}),e.jsx(f,{style:{borderColor:o===t.oldImg&&!l?B:P,borderWidth:o===t.oldImg&&!l?3:1,width:50,height:50},onPress:()=>{i(null),t.onImgSelect(null),t.onImgUrlChanged(t.oldImg),r(t.oldImg)},children:e.jsx(g,{width:50,height:50,src:t.oldImg})},t.oldImg)]})})]})]})]})}export{O as C,N as I};
