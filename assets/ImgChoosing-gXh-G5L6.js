import{r as d,j as e,B as h,R as m,T as u,t as l,C as c,b as y,h as C,O as v,e as g,P as k,S as D,D as B,l as f,Q as P,y as W}from"./osRouter-CzzlJ7Ez.js";import{S as b}from"./SaveBox-CRxly_PM.js";import{F as R}from"./FileSelector-xqa5lfy1.js";function O(t){const[n,i]=d.useState(""),[s,r]=d.useState(""),[o,x]=d.useState(structuredClone(t.default_customFields_user)),[S,p]=d.useState(""),w=()=>{if(!n||!s){p(l("Please enter both key and value."));return}if(o.hasOwnProperty(n)){p(l("This key already exists. Please use a different key."));return}x(a=>{const j={...a,[n]:s};return t.onUpdate(j),j}),i(""),r(""),p("")},F=a=>{x(j=>{const I={...j};return delete I[a],t.onUpdate(I),I})},_=()=>{x({}),t.onUpdate({})};return e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(u,{children:l("Custom Fields(to improve search)")})}),e.jsx(b,{testID:"customFieldManipulator_key",label:l("Enter key"),defaultValue:n,onSave:i}),e.jsx(b,{testID:"customFieldManipulator_val",label:l("Enter value"),defaultValue:s,onSave:r}),e.jsxs(m,{children:[e.jsx(c,{}),e.jsx(c,{}),e.jsx(c,{})]}),e.jsxs(m,{children:[e.jsx(c,{children:e.jsx(y,{testID:"customFieldManipulator_add",icon:"link-plus",onPress:w,children:l("Add")})}),e.jsx(c,{children:e.jsx(y,{testID:"customFieldManipulator_reset",icon:"delete",onPress:_,children:l("Reset")})})]}),S?e.jsx(u,{style:M.error,children:S}):null,Object.entries(o).length>0?Object.entries(o).map(a=>e.jsx(h,{children:e.jsxs(m,{style:{borderBottomColor:"black",borderBottomWidth:1},children:[e.jsx(c,{style:{width:150},children:e.jsxs(u,{children:[a[0],": ",a[1]]})}),e.jsx(c,{children:e.jsx(y,{testID:"customFieldManipulator_del",icon:"minus-box",onPress:()=>F(a[0]),children:l("del")})})]})},a[0])):e.jsx(u,{children:l("No entries added yet.")})]})}const M={error:{color:"red",marginBottom:10}};function U(t){const[n,i]=d.useState(t.defaultSelected),s=d.useMemo(()=>e.jsx(e.Fragment,{children:t.imagesList.map((r,o)=>e.jsx(d.Fragment,{children:e.jsx(C,{style:{borderColor:v,borderWidth:1,width:50,height:50},onPress:()=>{t.onImgChange({img:r}),i(x=>r)},children:e.jsx(g,{width:50,height:50,src:r})})},r))}),[t.imagesList.length]);return e.jsxs(k,{children:[e.jsx(g,{width:50,height:50,src:n}),e.jsxs(D,{height:100,style:{borderColor:"black",borderWidth:1},children:[e.jsx(u,{children:l("or choose one of below images ")}),e.jsx(m,{testID:"addMem_imgs",style:{width:300,display:"flex",justifyContent:"space-evenly",alignItems:"center",alignContent:"center",flexWrap:"wrap"},children:s})]})]})}function T(t){const[n,i]=d.useState(null),[s,r]=d.useState(null);return e.jsxs(h,{style:{display:"flex",flexDirection:"column",width:"100%"},children:[e.jsxs(u,{children:[l("choose the mem image:")," "]}),e.jsx(B,{}),e.jsxs(h,{style:{borderColor:"black",borderWidth:1},children:[e.jsx(b,{label:l("type the image url..."),defaultValue:s!=null&&s.startsWith("images/")||s!=null&&s.startsWith("icons/")?"":s,keyboardType:"numeric",onSave:o=>{i(null),t.onImgSelect(null),t.onImgUrlChanged(o),r(o)}}),e.jsxs(h,{style:{display:"flex",flexDirection:f.smallScreen?"column":"row"},children:[e.jsx(U,{defaultSelected:t.currentImg,imagesList:f.allImgs,onImgChange:({img:o})=>{i(null),t.onImgSelect(null),t.onImgUrlChanged(o),r(o)}}),e.jsxs(h,{style:{alignSelf:"center",alignItems:"center",height:100,borderColor:"black",borderWidth:3},children:[e.jsx(R,{icon:"image",accept:"png",tmpFileName:"imgChoosing_img.png",onFileSelect_:async o=>{i(o),t.onImgSelect(o),t.onImgUrlChanged(null),r(null)},children:l("or select image")}),!!n&&e.jsx(g,{style:{border:"solid  2px green"},width:50,height:50,src:typeof n=="string"?n:URL.createObjectURL(n),dontResolve:!0})]}),e.jsx(h,{sortItems:!0,children:!!t.oldImg&&e.jsxs(e.Fragment,{children:[e.jsxs(u,{children:["  ",l("original image")," "]}),e.jsx(C,{style:{borderColor:s===t.oldImg&&!n?P:W,borderWidth:s===t.oldImg&&!n?3:1,width:50,height:50},onPress:()=>{i(null),t.onImgSelect(null),t.onImgUrlChanged(t.oldImg),r(t.oldImg)},children:e.jsx(g,{width:50,height:50,src:t.oldImg})},t.oldImg)]})})]})]})]})}export{O as C,T as I};
