(function(_0x2fc548,_0x1357a3){const _0x329d2f=a30_0x5776,_0x480fe7=_0x2fc548();while(!![]){try{const _0x26253b=parseInt(_0x329d2f(0x1cb))/0x1+-parseInt(_0x329d2f(0x1cf))/0x2+parseInt(_0x329d2f(0x1ab))/0x3+-parseInt(_0x329d2f(0x1ae))/0x4+parseInt(_0x329d2f(0x1ba))/0x5*(parseInt(_0x329d2f(0x1c9))/0x6)+parseInt(_0x329d2f(0x186))/0x7+-parseInt(_0x329d2f(0x1b5))/0x8;if(_0x26253b===_0x1357a3)break;else _0x480fe7['push'](_0x480fe7['shift']());}catch(_0x3d0b02){_0x480fe7['push'](_0x480fe7['shift']());}}}(a30_0x428a,0xd77f4));function a30_0x5776(_0xdc6e29,_0x162ec8){const _0x5d3fdc=a30_0x428a();return a30_0x5776=function(_0x555897,_0xc368a5){_0x555897=_0x555897-0x186;let _0x42a366=_0x5d3fdc[_0x555897];return _0x42a366;},a30_0x5776(_0xdc6e29,_0x162ec8);}const a30_0xc368a5=(function(){let _0x2e0aee=!![];return function(_0x573e31,_0x490bef){const _0x4af175=_0x2e0aee?function(){const _0x5dc5db=a30_0x5776;if(_0x490bef){const _0x242199=_0x490bef[_0x5dc5db(0x1af)](_0x573e31,arguments);return _0x490bef=null,_0x242199;}}:function(){};return _0x2e0aee=![],_0x4af175;};}()),a30_0x555897=a30_0xc368a5(this,function(){const _0x29ad57=a30_0x5776,_0x332043=function(){const _0x4c538e=a30_0x5776;let _0x33a94a;try{_0x33a94a=Function(_0x4c538e(0x1d4)+_0x4c538e(0x19b)+');')();}catch(_0x87ef01){_0x33a94a=window;}return _0x33a94a;},_0x21d254=_0x332043(),_0x289a14=_0x21d254['console']=_0x21d254[_0x29ad57(0x18f)]||{},_0x2b1424=[_0x29ad57(0x1b7),_0x29ad57(0x1b2),_0x29ad57(0x1b8),_0x29ad57(0x1a0),_0x29ad57(0x19d),_0x29ad57(0x1c5),_0x29ad57(0x1c4)];for(let _0x4719c9=0x0;_0x4719c9<_0x2b1424[_0x29ad57(0x1cd)];_0x4719c9++){const _0x248db1=a30_0xc368a5[_0x29ad57(0x18d)][_0x29ad57(0x1a5)][_0x29ad57(0x1b3)](a30_0xc368a5),_0x1306bb=_0x2b1424[_0x4719c9],_0x5f51b5=_0x289a14[_0x1306bb]||_0x248db1;_0x248db1['__proto__']=a30_0xc368a5[_0x29ad57(0x1b3)](a30_0xc368a5),_0x248db1[_0x29ad57(0x19e)]=_0x5f51b5[_0x29ad57(0x19e)][_0x29ad57(0x1b3)](_0x5f51b5),_0x289a14[_0x1306bb]=_0x248db1;}});a30_0x555897();import{y as a30_0x455cc6,l as a30_0x432112,u as a30_0x1e46f6,i as a30_0x35e4f0}from'./PaperMainTemplate-BHbNrcdI.js';import{x as a30_0x3b6141,S as a30_0x2b3e88,T as a30_0x36213c,U as a30_0x32b218,V,J as a30_0x60626,W as a30_0x343f66,D,X as a30_0x282965,h as a30_0x553b39,K as a30_0x4d8fea}from'./addImgOrIconToVisNode_-CTmU_rfz.js';import{J as a30_0x5c205e,Q as a30_0x557d34,X as a30_0x3858f4,ah as a30_0x3627cf,K as a30_0x4c3542}from'./index-3u-0PFJs.js';import{s as a30_0x35b48b}from'./showToast-jdtOUyo1.js';function a30_0x428a(){const _0x9edae4=['configs','toLowerCase','trace','table','captionTheImg','trim','customFields_model','18UTPggy','generate_customFields_model\x20failed','1723505rRBJuF','memBeforeEdit','length','category','1856070dgKJMh','withImages','shape','valueOf','memsChunks','return\x20(function()\x20','11375861VPAEyD','set','title','green','content','keys','favorite','constructor','parents_rel','console','customFields_user','ranking','hidden','parents_id','key','chunks_ids','something\x20went\x20wrong\x20on\x20saving\x20image.\x20this\x20might\x20be\x20a\x20temporary\x20browser\x20storage\x20issue','alert','get','delete','catch','{}.constructor(\x22return\x20this\x22)(\x20)','value','exception','toString','newMemForm','error','content_string','nodes','creationTime','visNetworkConfig','prototype','mems_visNetworkGraph_edges2','selectedImg','update','level','all_used_category','2235426EUGsAq','isAChunk','imgCaption_embedding','2236612CyZTNy','apply','imgCaption_string','score','warn','bind','summarization','21023192osMJwn','shared_fields','log','info','mems','1506655qIAwUg','image/png','star','title_string','split','all_used_Fields','mems_visNetworkGraph_nodes2','img'];a30_0x428a=function(){return _0x9edae4;};return a30_0x428a();}async function R(_0x1b34b2){const _0x3a4041=a30_0x5776;var _0x57e5cc,_0x1db00f,_0x24614c;const _0x2d4714=a30_0x5c205e[_0x3a4041(0x1b9)][_0x3a4041(0x198)](_0x1b34b2['memBeforeEdit']['id']),_0x4a08d5=!a30_0x455cc6(_0x1b34b2['memBeforeEdit'][_0x3a4041(0x190)],_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x190)]),_0x4c6df8=!a30_0x455cc6(_0x1b34b2['memBeforeEdit'][_0x3a4041(0x193)],_0x1b34b2['newMemForm']['parents_id'])||!a30_0x455cc6(_0x1b34b2['memBeforeEdit'][_0x3a4041(0x18e)],_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x18e)]),_0x249b8d=_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x188)]!==_0x1b34b2[_0x3a4041(0x1cc)][_0x3a4041(0x1bd)],_0x43efd6=_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x18a)]!==_0x1b34b2[_0x3a4041(0x1cc)][_0x3a4041(0x1a1)],_0x3f7d4d=_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x1ce)]!==_0x1b34b2[_0x3a4041(0x1cc)][_0x3a4041(0x1ce)],_0x2a9205={'title_string':_0x249b8d?_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x188)]:_0x1b34b2[_0x3a4041(0x1cc)][_0x3a4041(0x1bd)],'content_string':_0x43efd6?_0x1b34b2['newMemForm']['content']:_0x1b34b2[_0x3a4041(0x1cc)][_0x3a4041(0x1a1)],'title':_0x249b8d?await a30_0x3b6141({'text':_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x188)]}):_0x2d4714['title'],'content':_0x43efd6?await a30_0x3b6141({'text':_0x1b34b2['newMemForm'][_0x3a4041(0x18a)]}):_0x2d4714['content'],'tags':(_0x1db00f=(_0x57e5cc=_0x1b34b2['newMemForm']['tags'])==null?void 0x0:_0x57e5cc[_0x3a4041(0x1c7)]())==null?void 0x0:_0x1db00f[_0x3a4041(0x1c3)]()[_0x3a4041(0x1be)]('\x20'),'score':_0x2d4714[_0x3a4041(0x1b1)],'id':_0x2d4714['id'],'parents_id':_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x193)],'parents_rel':_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x18e)],'img':null,'favorite':_0x2d4714[_0x3a4041(0x18c)],'hidden':_0x2d4714[_0x3a4041(0x192)],'level':_0x4c6df8?a30_0x2b3e88(_0x1b34b2[_0x3a4041(0x19f)]['parents_id']):_0x2d4714[_0x3a4041(0x1a9)],'ranking':_0x2d4714[_0x3a4041(0x191)],'shape':_0x2d4714[_0x3a4041(0x1d1)],'star':_0x2d4714[_0x3a4041(0x1bc)],'summarization':_0x2d4714[_0x3a4041(0x1b4)],'creationTime':_0x2d4714[_0x3a4041(0x1a3)],'modificationTime':new Date()[_0x3a4041(0x1d2)](),'chunks_ids':_0x2d4714[_0x3a4041(0x195)],'isAChunk':_0x2d4714[_0x3a4041(0x1ac)],'imgCaption_embedding':_0x2d4714[_0x3a4041(0x1ad)],'imgCaption_string':_0x2d4714[_0x3a4041(0x1b0)],'customFields_user':_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x190)],'customFields_model':_0x2d4714['customFields_model'],'category':_0x3f7d4d?_0x1b34b2[_0x3a4041(0x19f)][_0x3a4041(0x1ce)]:_0x1b34b2['memBeforeEdit']['category']},_0x55fca4=(_0x24614c=_0x1b34b2['newMemForm'][_0x3a4041(0x1c1)])==null?void 0x0:_0x24614c[_0x3a4041(0x1c7)](),_0x2859ab=_0x1b34b2[_0x3a4041(0x1cc)]['img']!==_0x55fca4||!!_0x1b34b2[_0x3a4041(0x1a7)];let _0x78ad9b=null,_0x19159d=null;if(_0x2859ab){if(_0x1b34b2['selectedImg']){const _0x531aaa=await a30_0x432112(_0x1b34b2[_0x3a4041(0x1a7)]);if(_0x78ad9b=await a30_0x36213c(_0x531aaa),_0x19159d=a30_0x1e46f6[_0x3a4041(0x1c2)]['imgInternalStoragePath']+'/'+_0x2d4714['id'],_0x2a9205['img']=_0x19159d,_0x1b34b2[_0x3a4041(0x1c6)]){const _0x119a35=await a30_0x32b218({'img':new Blob([_0x78ad9b],{'type':_0x3a4041(0x1bb)})});_0x2a9205[_0x3a4041(0x1b0)]=_0x119a35,_0x2a9205[_0x3a4041(0x1ad)]=_0x119a35?await a30_0x3b6141({'text':_0x119a35}):null;}}else _0x2a9205[_0x3a4041(0x1c1)]=_0x55fca4;}else _0x2a9205[_0x3a4041(0x1c1)]=_0x1b34b2[_0x3a4041(0x1cc)][_0x3a4041(0x1c1)];let _0x1ab794=[];_0x43efd6&&(_0x1ab794=await V({'newMem':_0x2a9205,'strategy':_0x1b34b2['chunkingMode']??null}),_0x2a9205[_0x3a4041(0x195)]=_0x1ab794['map'](_0x2fb143=>_0x2fb143['id']));let _0x3f0d74=await a30_0x557d34(_0x3a4041(0x1bf))??{};if(_0x4a08d5?_0x3f0d74=await a30_0x60626({'keys':Object[_0x3a4041(0x18b)](_0x2d4714[_0x3a4041(0x190)]),'sharedFileds':_0x3f0d74}):_0x3f0d74=await a30_0x60626({'keys':Object['keys'](_0x2a9205[_0x3a4041(0x190)]),'sharedFileds':_0x3f0d74}),_0x43efd6&&_0x1b34b2['generate_customFields_model']){_0x3f0d74=await a30_0x60626({'keys':Object['keys'](_0x2d4714[_0x3a4041(0x1c8)]),'sharedFileds':_0x3f0d74});const {res:_0x3a7319}=await a30_0x343f66({'content':_0x2a9205['content_string'],'all_used_Fields':new Set(Object[_0x3a4041(0x18b)](_0x3f0d74)),'reservedFieldsThatModelShouldNotUse':[...D]});if(!_0x3a7319)throw _0x3a4041(0x1ca);if(!_0x3a7319||!(_0x3a4041(0x1b6)in _0x3a7319))throw'';const _0x2b8043=[..._0x3a7319[_0x3a4041(0x1b6)],..._0x3a7319['new_fields']],_0x3ceea6={};for(let _0x4f15ce=0x0;_0x4f15ce<_0x2b8043['length'];_0x4f15ce++){const _0x592b21=_0x2b8043[_0x4f15ce];_0x3ceea6[_0x592b21[_0x3a4041(0x194)]]=_0x592b21[_0x3a4041(0x19c)];}_0x3f0d74=await a30_0x282965({'keys':Object[_0x3a4041(0x18b)](_0x3ceea6),'sharedFileds':_0x3f0d74}),_0x2a9205['customFields_model']=_0x3ceea6;}_0x3f0d74=await a30_0x282965({'keys':Object[_0x3a4041(0x18b)](_0x2a9205[_0x3a4041(0x190)]),'sharedFileds':_0x3f0d74});let _0x4b4347=await a30_0x557d34(_0x3a4041(0x1aa))??{};_0x3f7d4d&&(_0x3f0d74=await a30_0x60626({'keys':[_0x2a9205[_0x3a4041(0x1ce)]],'sharedFileds':_0x4b4347}),_0x4b4347=await a30_0x282965({'keys':[_0x2a9205[_0x3a4041(0x1ce)]],'sharedFileds':_0x4b4347}));const _0x18dcc9=_0x2a9205['id'];if(a30_0x5c205e[_0x3a4041(0x1b9)][_0x3a4041(0x187)](_0x18dcc9,_0x2a9205),await a30_0x1e46f6['db'][_0x3a4041(0x1b9)][_0x3a4041(0x199)](_0x2a9205['id']),await a30_0x1e46f6['db'][_0x3a4041(0x1b9)]['add'](_0x2a9205,_0x2a9205['id']),_0x43efd6){for(let _0x1f81c9=0x0;_0x1f81c9<_0x1ab794[_0x3a4041(0x1cd)];_0x1f81c9++){const _0x3e1ceb=_0x1ab794[_0x1f81c9];a30_0x5c205e[_0x3a4041(0x1d3)]['set'](_0x3e1ceb['id'],_0x3e1ceb);}await a30_0x1e46f6['db'][_0x3a4041(0x1d3)]['bulkAdd'](_0x1ab794),await a30_0x3858f4({'all_used_Fields':_0x3f0d74});}await a30_0x3858f4({'all_used_Fields':_0x3f0d74}),_0x3f7d4d&&await a30_0x3858f4({'all_used_category':_0x4b4347}),_0x2859ab&&_0x1b34b2[_0x3a4041(0x1a7)]&&await a30_0x3627cf(_0x19159d,_0x78ad9b)[_0x3a4041(0x19a)](_0x46eb47=>{const _0x38a8f3=_0x3a4041;a30_0x35b48b({'type':_0x38a8f3(0x197),'content':a30_0x4c3542(_0x38a8f3(0x196))});});const _0x52e1b2=a30_0x1e46f6[_0x3a4041(0x1c0)][_0x3a4041(0x198)](_0x18dcc9);let _0x408bab={...a30_0x35e4f0(_0x3a4041(0x1a4))[_0x3a4041(0x1a2)],..._0x52e1b2,'id':_0x18dcc9,'label':_0x2a9205[_0x3a4041(0x1bd)],'level':_0x2a9205[_0x3a4041(0x1a9)],'color':{..._0x52e1b2['color'],'background':_0x3a4041(0x189)}};if(a30_0x35e4f0('visNetworkConfig')[_0x3a4041(0x1d0)]&&_0x2859ab&&(_0x408bab=await a30_0x553b39({'img':_0x2a9205[_0x3a4041(0x1c1)],'node':_0x408bab})),a30_0x1e46f6[_0x3a4041(0x1c0)]['updateOnly']({'id':_0x2a9205['id'],..._0x408bab}),_0x408bab[_0x3a4041(0x1a9)],_0x4c6df8){const _0x2bc74c=a30_0x4d8fea(_0x1b34b2[_0x3a4041(0x1cc)]);try{a30_0x1e46f6[_0x3a4041(0x1a6)]['remove'](_0x2bc74c);}catch{}const _0x5ab058=a30_0x4d8fea(_0x2a9205);try{a30_0x1e46f6[_0x3a4041(0x1a6)][_0x3a4041(0x1a8)](_0x5ab058);}catch{}return _0x2a9205;}return _0x2a9205;}export{R as e};