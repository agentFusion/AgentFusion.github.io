import{g as I,r as c,s as f,j as e,D as n,B as d,t as a,R as y,C as m,T as g,a as b,u as D,b as S,c as v,I as B,d as C,e as T,f as k}from"./osRouter-CzzlJ7Ez.js";import{R as F}from"./ResponsiblePage--ek9fNjC.js";import{I as R,C as U}from"./ImgChoosing-gXh-G5L6.js";import{S as o}from"./SaveBox-CRxly_PM.js";import"./index-BwzbyBLz.js";import"./AnimatedBox-DH0xIEE8.js";import"./FileSelector-xqa5lfy1.js";import"./TextInput-BeCEiALM.js";const q=I(({topMem:t,localAppSetting:r})=>{const[s,i]=c.useState({id:null,parents_id:[],parents_rel:[],title:"",content:"",tags:"",img:"",customFields_user:{},category:"general"}),[h,j]=c.useState(null),[u,x]=c.useState(null);return c.useEffect(()=>{var l;if(t!=null&&t.id){const _=f(t);i({id:null,parents_id:t?[t.id]:[],parents_rel:t?[""]:[],title:_,content:"",tags:(l=t.tags)==null?void 0:l.join(" "),img:t.img??null,customFields_user:{},category:t.category??"general"}),x(t.img??null)}},[t==null?void 0:t.id]),e.jsx(e.Fragment,{children:e.jsxs(F,{containerStyles:{},children:[e.jsx(n,{}),e.jsx(d,{style:{flexDirection:"column",marginBottom:20},children:e.jsx(o,{testID:"addMem_title",label:"*"+a("title"),defaultValue:s==null?void 0:s.title,onSave:l=>i({...s,title:l})})}),e.jsx(d,{style:{flexDirection:"column",marginBottom:20},children:e.jsx(o,{testID:"addMem_category",label:"*"+a("category"),defaultValue:s==null?void 0:s.category,onSave:l=>i({...s,category:l})})}),e.jsx(d,{style:{flexDirection:"column",marginBottom:20},children:e.jsx(o,{style:{height:500},multiline:!0,testID:"addMem_content",defaultValue:s==null?void 0:s.content,label:a("content"),onSave:l=>i({...s,content:l})})}),e.jsx(d,{style:{marginBottom:20},children:e.jsx(o,{testID:"addMem_tags",defaultValue:s==null?void 0:s.tags,label:a("tags"),onSave:l=>i({...s,tags:l})})}),e.jsx(n,{}),e.jsx(R,{oldImg:null,currentImg:u,onImgUrlChanged:l=>{x(l)},onImgSelect:l=>{j(l)}}),e.jsx(n,{}),e.jsxs(y,{children:[e.jsx(m,{children:e.jsx(g,{children:a("improve data retrieval and indexing of this mem  ")})}),e.jsx(m,{children:e.jsx(b,{testID:"searchImprovementUsingCustomFields",status:r.generate_customFields_model?"checked":"unchecked",onPress:()=>D({newSetting:{generate_customFields_model:!r.generate_customFields_model}})})})]}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(U,{default_customFields_user:(s==null?void 0:s.customFields_user)??{},onUpdate:l=>{i({...s,customFields_user:l})}}),e.jsx(n,{}),e.jsxs(d,{children:[e.jsx(S,{testID:"addMem_submit",icon:t!=null&&t.id?"plus-network":"shape-rectangle-plus",mode:"contained",onPress:async()=>{await v({newMemForm:{...s,img:u},selectedImg:h??null,captionTheImg:r.captionTheImg,generate_customFields_model:r.generate_customFields_model})},disabled:!s.title||!s.category||!1,children:a("Add the Memory node")}),(t==null?void 0:t.id)&&e.jsxs(d,{style:{flexDirection:"row"},children:[e.jsx(B,{icon:"help-circle",color:C,style:{margin:0,padding:0,width:"5%"},size:15}),e.jsxs(g,{children:[" ",a("adding as a subset of:")," "]}),e.jsx(T,{style:{backgroundColor:k},width:20,height:20,src:`${t.img}`}),e.jsxs(g,{children:["  "," ",t.title_string]})]})]})]})})},["topMem","localAppSetting"]);export{q as AddMem};
