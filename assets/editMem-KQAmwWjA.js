(function(_0x4470a4,_0x2f4570){const _0x11c563=a30_0x4f8e,_0x4485c1=_0x4470a4();while(!![]){try{const _0x5f1313=parseInt(_0x11c563(0x11c))/0x1+-parseInt(_0x11c563(0x113))/0x2*(-parseInt(_0x11c563(0x10c))/0x3)+-parseInt(_0x11c563(0x10b))/0x4+parseInt(_0x11c563(0x11f))/0x5*(-parseInt(_0x11c563(0x106))/0x6)+-parseInt(_0x11c563(0xf5))/0x7+-parseInt(_0x11c563(0x13a))/0x8+parseInt(_0x11c563(0x12b))/0x9;if(_0x5f1313===_0x2f4570)break;else _0x4485c1['push'](_0x4485c1['shift']());}catch(_0xd679a6){_0x4485c1['push'](_0x4485c1['shift']());}}}(a30_0x8f12,0xb0639));function a30_0x8f12(){const _0x2ad345=['toLowerCase','get','withImages','customFields_user','map','set','memBeforeEdit','416989hTLCFQ','captionTheImg','key','61015OQQbvM','imgInternalStoragePath','imgCaption_string','selectedImg','constructor','score','delete','category','green','title','mems_visNetworkGraph_edges2','parents_id','29463930mkiPHN','new_fields','apply','{}.constructor(\x22return\x20this\x22)(\x20)','log','generate_customFields_model\x20failed','bulkAdd','content_string','valueOf','catch','imgCaption_embedding','shape','chunks_ids','trace','newMemForm','5569768cnEShT','toString','trim','warn','level','mems_visNetworkGraph_nodes2','img','add','update','title_string','console','info','5641573mQvaUq','color','summarization','star','prototype','mems','content','all_used_category','visNetworkConfig','split','keys','memsChunks','length','favorite','configs','creationTime','parents_rel','60JsQoTj','generate_customFields_model','something\x20went\x20wrong\x20on\x20saving\x20image.\x20this\x20might\x20be\x20a\x20temporary\x20browser\x20storage\x20issue','table','customFields_model','5507676rHrRPn','3nSYfov','hidden','remove','return\x20(function()\x20','bind','error','chunkingMode','65678XPRWof','shared_fields'];a30_0x8f12=function(){return _0x2ad345;};return a30_0x8f12();}const a30_0x47fe03=(function(){let _0x95aa08=!![];return function(_0x247e0c,_0x19c955){const _0x3cfbf2=_0x95aa08?function(){const _0x756c61=a30_0x4f8e;if(_0x19c955){const _0x2faa8a=_0x19c955[_0x756c61(0x12d)](_0x247e0c,arguments);return _0x19c955=null,_0x2faa8a;}}:function(){};return _0x95aa08=![],_0x3cfbf2;};}()),a30_0x38ddb2=a30_0x47fe03(this,function(){const _0x4f2564=a30_0x4f8e;let _0x5c4d04;try{const _0x3308d5=Function(_0x4f2564(0x10f)+_0x4f2564(0x12e)+');');_0x5c4d04=_0x3308d5();}catch(_0x4cf9da){_0x5c4d04=window;}const _0xdd761f=_0x5c4d04[_0x4f2564(0xf3)]=_0x5c4d04[_0x4f2564(0xf3)]||{},_0x26dc29=[_0x4f2564(0x12f),_0x4f2564(0x13d),_0x4f2564(0xf4),_0x4f2564(0x111),'exception',_0x4f2564(0x109),_0x4f2564(0x138)];for(let _0x49aa46=0x0;_0x49aa46<_0x26dc29[_0x4f2564(0x101)];_0x49aa46++){const _0x3ebd31=a30_0x47fe03[_0x4f2564(0x123)][_0x4f2564(0xf9)][_0x4f2564(0x110)](a30_0x47fe03),_0x57b2e7=_0x26dc29[_0x49aa46],_0x22da8a=_0xdd761f[_0x57b2e7]||_0x3ebd31;_0x3ebd31['__proto__']=a30_0x47fe03['bind'](a30_0x47fe03),_0x3ebd31[_0x4f2564(0x13b)]=_0x22da8a['toString']['bind'](_0x22da8a),_0xdd761f[_0x57b2e7]=_0x3ebd31;}});a30_0x38ddb2();import{s as a30_0x23b748,ak as a30_0x3e435f,a0 as a30_0x314956,u as a30_0x7fe5b1,a2 as a30_0x3fb080,E as a30_0x446136}from'./PaperMainTemplate-CBlpPhnV.js';import{x as a30_0x1d3ba9,S as a30_0x300d31,T as a30_0x5c4714,U as a30_0x47f675,V as a30_0xd84f6f,J as a30_0x288ca6,W as a30_0x4bf03e,D as a30_0x340f41,X as a30_0x19c253,h as a30_0x4b23de,K as a30_0x445a5e}from'./addImgOrIconToVisNode_-CRxAHQ8F.js';import{e as a30_0x3605f9,s as a30_0x54a699,t as a30_0xbf5fb2}from'./index-CEFjUrU_.js';function a30_0x4f8e(_0x51bd27,_0x2f7e9e){const _0x2c75a6=a30_0x8f12();return a30_0x4f8e=function(_0x38ddb2,_0x47fe03){_0x38ddb2=_0x38ddb2-0xf3;let _0x170fdc=_0x2c75a6[_0x38ddb2];return _0x170fdc;},a30_0x4f8e(_0x51bd27,_0x2f7e9e);}import{s as a30_0xeeb6e9}from'./showToast-DBpU5ecH.js';async function R(_0x4552b0){const _0x5b4ac3=a30_0x4f8e;var _0xa1abe,_0x509adc,_0x465684;const _0x3ee1f5=a30_0x23b748[_0x5b4ac3(0xfa)]['get'](_0x4552b0[_0x5b4ac3(0x11b)]['id']),_0x32d0fc=!a30_0x3e435f(_0x4552b0[_0x5b4ac3(0x11b)][_0x5b4ac3(0x118)],_0x4552b0[_0x5b4ac3(0x139)][_0x5b4ac3(0x118)]),_0x3b6bed=!a30_0x3e435f(_0x4552b0[_0x5b4ac3(0x11b)][_0x5b4ac3(0x12a)],_0x4552b0['newMemForm'][_0x5b4ac3(0x12a)])||!a30_0x3e435f(_0x4552b0['memBeforeEdit'][_0x5b4ac3(0x105)],_0x4552b0[_0x5b4ac3(0x139)][_0x5b4ac3(0x105)]),_0x589705=_0x4552b0['newMemForm'][_0x5b4ac3(0x128)]!==_0x4552b0[_0x5b4ac3(0x11b)][_0x5b4ac3(0x143)],_0x224156=_0x4552b0[_0x5b4ac3(0x139)]['content']!==_0x4552b0['memBeforeEdit']['content_string'],_0xfe580c=_0x4552b0[_0x5b4ac3(0x139)][_0x5b4ac3(0x126)]!==_0x4552b0['memBeforeEdit'][_0x5b4ac3(0x126)],_0x5b7383={'title_string':_0x589705?_0x4552b0[_0x5b4ac3(0x139)]['title']:_0x4552b0[_0x5b4ac3(0x11b)][_0x5b4ac3(0x143)],'content_string':_0x224156?_0x4552b0[_0x5b4ac3(0x139)]['content']:_0x4552b0['memBeforeEdit']['content_string'],'title':_0x589705?await a30_0x1d3ba9({'text':_0x4552b0[_0x5b4ac3(0x139)]['title']}):_0x3ee1f5[_0x5b4ac3(0x128)],'content':_0x224156?await a30_0x1d3ba9({'text':_0x4552b0[_0x5b4ac3(0x139)]['content']}):_0x3ee1f5[_0x5b4ac3(0xfb)],'tags':(_0x509adc=(_0xa1abe=_0x4552b0['newMemForm']['tags'])==null?void 0x0:_0xa1abe[_0x5b4ac3(0x13c)]())==null?void 0x0:_0x509adc[_0x5b4ac3(0x115)]()[_0x5b4ac3(0xfe)]('\x20'),'score':_0x3ee1f5[_0x5b4ac3(0x124)],'id':_0x3ee1f5['id'],'parents_id':_0x4552b0[_0x5b4ac3(0x139)][_0x5b4ac3(0x12a)],'parents_rel':_0x4552b0[_0x5b4ac3(0x139)][_0x5b4ac3(0x105)],'img':null,'favorite':_0x3ee1f5[_0x5b4ac3(0x102)],'hidden':_0x3ee1f5[_0x5b4ac3(0x10d)],'level':_0x3b6bed?a30_0x300d31(_0x4552b0[_0x5b4ac3(0x139)][_0x5b4ac3(0x12a)]):_0x3ee1f5[_0x5b4ac3(0x13e)],'ranking':_0x3ee1f5['ranking'],'shape':_0x3ee1f5[_0x5b4ac3(0x136)],'star':_0x3ee1f5[_0x5b4ac3(0xf8)],'summarization':_0x3ee1f5[_0x5b4ac3(0xf7)],'creationTime':_0x3ee1f5[_0x5b4ac3(0x104)],'modificationTime':new Date()[_0x5b4ac3(0x133)](),'chunks_ids':_0x3ee1f5['chunks_ids'],'isAChunk':_0x3ee1f5['isAChunk'],'imgCaption_embedding':_0x3ee1f5[_0x5b4ac3(0x135)],'imgCaption_string':_0x3ee1f5[_0x5b4ac3(0x121)],'customFields_user':_0x4552b0[_0x5b4ac3(0x139)]['customFields_user'],'customFields_model':_0x3ee1f5[_0x5b4ac3(0x10a)],'category':_0xfe580c?_0x4552b0['newMemForm']['category']:_0x4552b0[_0x5b4ac3(0x11b)][_0x5b4ac3(0x126)]},_0x19092e=(_0x465684=_0x4552b0[_0x5b4ac3(0x139)][_0x5b4ac3(0x140)])==null?void 0x0:_0x465684[_0x5b4ac3(0x13c)](),_0x831a7f=_0x4552b0[_0x5b4ac3(0x11b)]['img']!==_0x19092e||!!_0x4552b0[_0x5b4ac3(0x122)];let _0x27b035=null,_0x4d572a=null;if(_0x831a7f){if(_0x4552b0['selectedImg']){const _0x77a85a=await a30_0x314956(_0x4552b0['selectedImg']);if(_0x27b035=await a30_0x5c4714(_0x77a85a),_0x4d572a=a30_0x7fe5b1[_0x5b4ac3(0x103)][_0x5b4ac3(0x120)]+'/'+_0x3ee1f5['id'],_0x5b7383['img']=_0x4d572a,_0x4552b0[_0x5b4ac3(0x11d)]){const _0x3d11e3=await a30_0x47f675({'img':new Blob([_0x27b035],{'type':'image/png'})});_0x5b7383['imgCaption_string']=_0x3d11e3,_0x5b7383[_0x5b4ac3(0x135)]=_0x3d11e3?await a30_0x1d3ba9({'text':_0x3d11e3}):null;}}else _0x5b7383['img']=_0x19092e;}else _0x5b7383['img']=_0x4552b0[_0x5b4ac3(0x11b)][_0x5b4ac3(0x140)];let _0x3cd593=[];_0x224156&&(_0x3cd593=await a30_0xd84f6f({'newMem':_0x5b7383,'strategy':_0x4552b0[_0x5b4ac3(0x112)]??null}),_0x5b7383[_0x5b4ac3(0x137)]=_0x3cd593[_0x5b4ac3(0x119)](_0x190462=>_0x190462['id']));let _0x23a66b=await a30_0x3605f9('all_used_Fields')??{};if(_0x32d0fc?_0x23a66b=await a30_0x288ca6({'keys':Object[_0x5b4ac3(0xff)](_0x3ee1f5[_0x5b4ac3(0x118)]),'sharedFileds':_0x23a66b}):_0x23a66b=await a30_0x288ca6({'keys':Object['keys'](_0x5b7383[_0x5b4ac3(0x118)]),'sharedFileds':_0x23a66b}),_0x224156&&_0x4552b0[_0x5b4ac3(0x107)]){_0x23a66b=await a30_0x288ca6({'keys':Object['keys'](_0x3ee1f5['customFields_model']),'sharedFileds':_0x23a66b});const {res:_0x370206}=await a30_0x4bf03e({'content':_0x5b7383[_0x5b4ac3(0x132)],'all_used_Fields':new Set(Object['keys'](_0x23a66b)),'reservedFieldsThatModelShouldNotUse':[...a30_0x340f41]});if(!_0x370206)throw _0x5b4ac3(0x130);if(!_0x370206||!('shared_fields'in _0x370206))throw'';const _0x123ba7=[..._0x370206[_0x5b4ac3(0x114)],..._0x370206[_0x5b4ac3(0x12c)]],_0x325090={};for(let _0x2a08e8=0x0;_0x2a08e8<_0x123ba7[_0x5b4ac3(0x101)];_0x2a08e8++){const _0x2e27bb=_0x123ba7[_0x2a08e8];_0x325090[_0x2e27bb[_0x5b4ac3(0x11e)]]=_0x2e27bb['value'];}_0x23a66b=await a30_0x19c253({'keys':Object[_0x5b4ac3(0xff)](_0x325090),'sharedFileds':_0x23a66b}),_0x5b7383['customFields_model']=_0x325090;}_0x23a66b=await a30_0x19c253({'keys':Object[_0x5b4ac3(0xff)](_0x5b7383[_0x5b4ac3(0x118)]),'sharedFileds':_0x23a66b});let _0xcee2ed=await a30_0x3605f9(_0x5b4ac3(0xfc))??{};_0xfe580c&&(_0x23a66b=await a30_0x288ca6({'keys':[_0x5b7383[_0x5b4ac3(0x126)]],'sharedFileds':_0xcee2ed}),_0xcee2ed=await a30_0x19c253({'keys':[_0x5b7383[_0x5b4ac3(0x126)]],'sharedFileds':_0xcee2ed}));const _0x29ba6f=_0x5b7383['id'];if(a30_0x23b748[_0x5b4ac3(0xfa)][_0x5b4ac3(0x11a)](_0x29ba6f,_0x5b7383),await a30_0x7fe5b1['db']['mems'][_0x5b4ac3(0x125)](_0x5b7383['id']),await a30_0x7fe5b1['db'][_0x5b4ac3(0xfa)][_0x5b4ac3(0x141)](_0x5b7383,_0x5b7383['id']),_0x224156){for(let _0xb971fb=0x0;_0xb971fb<_0x3cd593[_0x5b4ac3(0x101)];_0xb971fb++){const _0x2b91e6=_0x3cd593[_0xb971fb];a30_0x23b748['memsChunks'][_0x5b4ac3(0x11a)](_0x2b91e6['id'],_0x2b91e6);}await a30_0x7fe5b1['db'][_0x5b4ac3(0x100)][_0x5b4ac3(0x131)](_0x3cd593),await a30_0x54a699({'all_used_Fields':_0x23a66b});}await a30_0x54a699({'all_used_Fields':_0x23a66b}),_0xfe580c&&await a30_0x54a699({'all_used_category':_0xcee2ed}),_0x831a7f&&_0x4552b0[_0x5b4ac3(0x122)]&&await a30_0x3fb080(_0x4d572a,_0x27b035)[_0x5b4ac3(0x134)](_0x11e549=>{const _0x1399e0=_0x5b4ac3;a30_0xeeb6e9({'type':'alert','content':a30_0xbf5fb2(_0x1399e0(0x108))});});const _0x5aef25=a30_0x7fe5b1['mems_visNetworkGraph_nodes2'][_0x5b4ac3(0x116)](_0x29ba6f);let _0x13a5c8={...a30_0x446136(_0x5b4ac3(0xfd))['nodes'],..._0x5aef25,'id':_0x29ba6f,'label':_0x5b7383['title_string'],'level':_0x5b7383['level'],'color':{..._0x5aef25[_0x5b4ac3(0xf6)],'background':_0x5b4ac3(0x127)}};if(a30_0x446136(_0x5b4ac3(0xfd))[_0x5b4ac3(0x117)]&&_0x831a7f&&(_0x13a5c8=await a30_0x4b23de({'img':_0x5b7383[_0x5b4ac3(0x140)],'node':_0x13a5c8})),a30_0x7fe5b1[_0x5b4ac3(0x13f)]['updateOnly']({'id':_0x5b7383['id'],..._0x13a5c8}),_0x13a5c8['level'],_0x3b6bed){const _0xb98edb=a30_0x445a5e(_0x4552b0[_0x5b4ac3(0x11b)]);try{a30_0x7fe5b1[_0x5b4ac3(0x129)][_0x5b4ac3(0x10e)](_0xb98edb);}catch{}const _0x21e53e=a30_0x445a5e(_0x5b7383);try{a30_0x7fe5b1[_0x5b4ac3(0x129)][_0x5b4ac3(0x142)](_0x21e53e);}catch{}return _0x5b7383;}return _0x5b7383;}export{R as e};