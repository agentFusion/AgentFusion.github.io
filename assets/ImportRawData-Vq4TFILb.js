import{j as e,W as R,r,B as T,R as s,d as _,t,a as w,X as $,Y as I,Z as y,_ as J,$ as B,D as v,a0 as q,a1 as O,U as W,a2 as V,a3 as A,q as z,a4 as X,S as Y,a5 as Z,h as G,m as K,l as E,a6 as U}from"./osRouter-DduoGc9m.js";import{S as C,H as L}from"./Hint-6db-kMXC.js";import{R as Q}from"./ResponsiblePage-koPm79av.js";import{T as c}from"./TextInput-CjJjVAgw.js";import{F as S}from"./FileSelector-JS-xp5aP.js";import"./index-DBpTsiB0.js";import"./AnimatedBox-cgDOfWR0.js";function M(){return e.jsx(R,{})}const ee=({userDataHaveId:n,withUi:i,chunkingMode:o})=>{const[l,m]=r.useState(null),[x,u]=r.useState(null),[a,b]=r.useState({title:"title",content:"content",tags:"tags",img:"img",id:"id"}),[j,g]=r.useState({from:"from",to:"to",relation:"relation"});return e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:[e.jsx(s,{children:e.jsx(_,{children:t("fileds will be mapped like this:")})}),n&&e.jsx(s,{children:e.jsx(c,{label:t("id field from "),value:a?.id,onChangeText:d=>b({...a,id:d})})}),e.jsx(s,{children:e.jsx(c,{label:t("title field from "),value:a?.title,onChangeText:d=>b({...a,title:d})})}),e.jsx(s,{children:e.jsx(c,{label:t("content field from "),value:a?.content,onChangeText:d=>b({...a,content:d})})}),e.jsx(s,{children:e.jsx(c,{label:t("tags field from "),value:a?.tags,onChangeText:d=>b({...a,tags:d})})}),e.jsx(s,{children:e.jsx(c,{label:t("img field from "),value:a?.img,onChangeText:d=>b({...a,img:d})})})]}),e.jsxs(T,{children:[e.jsx(s,{children:e.jsx(_,{children:t("edges fileds will be mapped like this:")})}),e.jsx(s,{children:e.jsx(c,{label:t("source field name"),value:j?.from,onChangeText:d=>g({...j,from:d})})}),e.jsx(s,{children:e.jsx(c,{label:t("destination field name "),value:j?.to,onChangeText:d=>g({...j,to:d})})}),e.jsx(s,{children:e.jsx(c,{label:"relation field name ",value:j?.relation,onChangeText:d=>g({...j,relation:d})})})]}),e.jsxs(s,{sortItems:!0,children:[e.jsx(S,{icon:"import",style:{maxWidth:200},tmpFileName:"file1",onFileSelect_:d=>{m(d)},children:t("load nodes")}),e.jsx(S,{icon:"import",style:{maxWidth:200},tmpFileName:"file2",onFileSelect_:d=>{u(d)},children:t("load edges")})]}),e.jsx(w,{onPress:async()=>{$({text:await I(l),text2:await I(x),userInputs:{mappingFileds_edges:j,mappingFileds_withoutParentId:a,userDataHaveId:n,withUi:i,chunkingMode:o}})},children:t("start importing")})]})},te=({userDataHaveId:n,mappingFileds:i,set_mappingFileds:o})=>e.jsxs(e.Fragment,{children:[e.jsx(s,{children:e.jsx(_,{children:t("fileds will be mapped like this:")})}),n&&e.jsx(s,{children:e.jsx(y,{label:t("id field from "),value:i?.id,onChangeText:l=>o({...i,id:l})})}),e.jsx(s,{children:e.jsx(y,{label:t("title field from "),value:i?.title,onChangeText:l=>o({...i,title:l})})}),e.jsx(s,{children:e.jsx(y,{label:t("content field from "),value:i?.content,onChangeText:l=>o({...i,content:l})})}),e.jsx(s,{children:e.jsx(y,{label:t("tags field from "),value:i?.tags,onChangeText:l=>o({...i,tags:l})})}),e.jsx(s,{children:e.jsx(y,{label:t("img field from "),value:i?.img,onChangeText:l=>o({...i,img:l})})}),e.jsx(s,{children:e.jsx(y,{label:t("parent field from"),value:i?.parents_id,onChangeText:l=>o({...i,parents_id:l})})}),e.jsx(s,{children:e.jsx(y,{label:t("parent field from"),value:i?.parents_rel,onChangeText:l=>o({...i,parents_rel:l})})})]}),se=({userDataHaveId:n,withUi:i,chunkingMode:o})=>{const[l,m]=r.useState(null),[x,u]=r.useState({id:"id",title:"title",content:"content",tags:"tags",img:"img",parents_id:"parents_id",parents_rel:"parents_rel"});return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsx(te,{userDataHaveId:n,mappingFileds:x,set_mappingFileds:u})}),e.jsx(s,{sortItems:!0,children:e.jsx(S,{icon:"import",style:{maxWidth:200},accept:"csv",tmpFileName:"file1",onFileSelect_:a=>{m(a)},children:t("select the file")})}),e.jsx(w,{onPress:async()=>{J({text:await I(l),userInputs:{mappingFileds:x,userDataHaveId:n,withUi:i,chunkingMode:o}})},children:t("start importing")})]})},ne=({userDataHaveId:n,withUi:i,chunkingMode:o})=>{const[l,m]=r.useState(null),[x,u]=r.useState({id:"id",title:"title",content:"content",tags:"tags",img:"img",children:"children"});return e.jsx(e.Fragment,{children:e.jsxs(T,{children:[e.jsx(s,{children:e.jsx(_,{children:t("fileds will be mapped like this:")})}),n&&e.jsx(s,{children:e.jsx(c,{label:t("id field from "),value:x?.id,onChangeText:a=>u({...x,id:a})})}),e.jsx(s,{children:e.jsx(c,{label:t("title field from "),value:x?.title,onChangeText:a=>u({...x,title:a})})}),e.jsx(s,{children:e.jsx(c,{label:t("content field from "),value:x?.content,onChangeText:a=>u({...x,content:a})})}),e.jsx(s,{children:e.jsx(c,{label:t("tags field from "),value:x?.tags,onChangeText:a=>u({...x,tags:a})})}),e.jsx(s,{children:e.jsx(c,{label:t("img field from "),value:x?.img,onChangeText:a=>u({...x,img:a})})}),e.jsx(s,{children:e.jsx(c,{label:t("children field from"),value:x?.children,onChangeText:a=>u({...x,children:a})})}),e.jsx(s,{sortItems:!0,children:e.jsx(S,{icon:"import",style:{maxWidth:200},accept:"json",tmpFileName:"file1",onFileSelect_:a=>{m(a)},children:t("select the file")})}),e.jsx(w,{onPress:async()=>{B({text:await I(l),userInputs:{mappingFileds_multilevel:x,userDataHaveId:n,withUi:i,chunkingMode:o}})},children:t("start importing")})]})})},le=({userDataHaveId:n,withUi:i,chunkingMode:o})=>{const[l,m]=r.useState(!1),[x,u]=r.useState(null),[a,b]=r.useState(null),[j,g]=r.useState({title:"title",content:"content",tags:"tags",img:"img",id:"id"}),[d,D]=r.useState({from:"from",to:"to",relation:"relation"});return e.jsxs(e.Fragment,{children:[e.jsxs(s,{sortItems:!0,children:[e.jsxs(T,{children:[e.jsx(s,{children:e.jsx(_,{children:t("fileds will be mapped like this:")})}),n&&e.jsx(s,{children:e.jsx(c,{label:t("id field from "),value:j?.id,onChangeText:h=>g({...j,id:h})})}),e.jsx(s,{children:e.jsx(c,{label:t("title field from "),value:j?.title,onChangeText:h=>g({...j,title:h})})}),e.jsx(s,{children:e.jsx(c,{label:t("content field from "),value:j?.content,onChangeText:h=>g({...j,content:h})})}),e.jsx(s,{children:e.jsx(c,{label:t("tags field from "),value:j?.tags,onChangeText:h=>g({...j,tags:h})})}),e.jsx(s,{children:e.jsx(c,{label:t("img field from "),value:j?.img,onChangeText:h=>g({...j,img:h})})})]}),e.jsxs(T,{children:[e.jsx(s,{children:e.jsx(_,{children:t("edges fileds will be mapped like this:")})}),e.jsx(s,{children:e.jsx(c,{label:t("source field name"),value:d?.from,onChangeText:h=>D({...d,from:h})})}),e.jsx(s,{children:e.jsx(c,{label:t("destination field name "),value:d?.to,onChangeText:h=>D({...d,to:h})})}),e.jsx(s,{children:e.jsx(c,{label:"relation field name ",value:d?.relation,onChangeText:h=>D({...d,relation:h})})})]})]}),e.jsx(v,{}),e.jsx(C,{testID:"nodesAndEdgesAreInTheSameFile",text:t("nodes And Edges Are In The Same File?"),items:[{name:"no",title:t("no"),callback:()=>{m(!1)}},{name:"yes",title:t("yes"),callback:()=>{m(!0)}}],default:"no"}),l&&e.jsx(s,{sortItems:!0,children:e.jsx(S,{icon:"import",style:{maxWidth:200},tmpFileName:"file1",onFileSelect_:h=>{b(h)},children:t("load edges")})}),!l&&e.jsxs(s,{sortItems:!0,children:[e.jsx(S,{icon:"import",style:{maxWidth:200},tmpFileName:"file1",onFileSelect_:h=>{u(h)},children:t("load nodes")}),e.jsx(S,{icon:"import",style:{maxWidth:200},tmpFileName:"file2",onFileSelect_:h=>{b(h)},children:t("load edges")})]}),e.jsx(v,{}),e.jsx(w,{testID:"startImporting",onPress:async()=>{let h=null,k=null;globalThis?.Cypress?(h=await(await fetch("testing/bigCorps_nodes.json")).text(),k=await(await fetch("testing/bigCorps_edges.json")).text()):(h=l?null:await I(x),k=await I(a)),await q({text:h,text2:k,alreadyParsed:!1,userInputs:{mappingFileds_edges:d,mappingFileds_withoutParentId:j,nodesAndEdgesAreInTheSameFile:l,userDataHaveId:n,chunkingMode:o,withUi:i}})},children:t("start importing")})]})},ie=({userDataHaveId:n,mappingFileds:i,set_mappingFileds:o})=>e.jsxs(e.Fragment,{children:[e.jsx(s,{children:e.jsx(_,{children:t("fileds will be mapped like this:")})}),n&&e.jsx(s,{children:e.jsx(c,{label:t("id field from "),value:i?.id,onChangeText:l=>o({...i,id:l})})}),e.jsx(s,{children:e.jsx(c,{label:t("title field from "),value:i?.title,onChangeText:l=>o({...i,title:l})})}),e.jsx(s,{children:e.jsx(c,{label:t("content field from "),value:i?.content,onChangeText:l=>o({...i,content:l})})}),e.jsx(s,{children:e.jsx(c,{label:t("tags field from "),value:i?.tags,onChangeText:l=>o({...i,tags:l})})}),e.jsx(s,{children:e.jsx(c,{label:t("img field from "),value:i?.img,onChangeText:l=>o({...i,img:l})})}),e.jsx(s,{children:e.jsx(c,{label:t("parent field from"),value:i?.parents_id,onChangeText:l=>o({...i,parents_id:l})})}),e.jsx(s,{children:e.jsx(c,{label:t("parent field from"),value:i?.parents_rel,onChangeText:l=>o({...i,parents_rel:l})})})]}),ae=({userDataHaveId:n,withUi:i,chunkingMode:o})=>{const[l,m]=r.useState(null),[x,u]=r.useState({id:"id",title:"title",content:"content",tags:"tags",img:"img",parents_id:"parents_id",parents_rel:"parents_rel"});return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsx(ie,{userDataHaveId:n,mappingFileds:x,set_mappingFileds:u})}),e.jsx(s,{sortItems:!0,children:e.jsx(S,{icon:"import",style:{maxWidth:200},onFileSelect_:a=>{m(a)},children:t("select the file")})}),e.jsx(w,{onPress:async()=>{O({text:await I(l),userInputs:{mappingFileds:x,userDataHaveId:n,withUi:i,chunkingMode:o}})},children:t("start importing")})]})};function oe({withUi:n,chunkingMode:i}){const[o,l]=r.useState(W.draggedFile),[m,x]=r.useState("");return e.jsx(e.Fragment,{children:e.jsxs(T,{children:[e.jsx(L,{children:t(" NOTE: you are importing raw data ....")}),e.jsx(v,{}),e.jsx(c,{mode:"flat",label:t("file structure description"),value:m,onChangeText:u=>x(u)}),e.jsx(L,{children:t("some description to help Ai...")}),e.jsx(v,{}),e.jsx(s,{sortItems:!0,children:e.jsx(S,{icon:"import",style:{maxWidth:200},tmpFileName:"file1",onFileSelect_:u=>{l(u)},children:t("select the file")})}),e.jsx(w,{disabled:!o,onPress:async()=>{V({selectedFile:o,withUi:n,userInputs:{userDescriptionAboutThisFile:m,chunkingMode:i}})},children:t("start importing")})]})})}const re={Json_multiLevel_onlyNodes:n=>e.jsx(r.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(ne,{userDataHaveId:n.userDataHaveId,withUi:n.withUi,chunkingMode:n.chunkingMode})}),Json_singleLevel_onlyNodes:n=>e.jsx(r.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(ae,{userDataHaveId:n.userDataHaveId,withUi:n.withUi,chunkingMode:n.chunkingMode})}),Csv_onlyNodes:n=>e.jsx(r.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(se,{userDataHaveId:n.userDataHaveId,withUi:n.withUi,chunkingMode:n.chunkingMode})}),Csv_nodesAndEdges:n=>e.jsx(r.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(ee,{userDataHaveId:n.userDataHaveId,withUi:n.withUi,chunkingMode:n.chunkingMode})}),Json_singleLevel_nodesAndEdges:n=>e.jsx(r.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(le,{userDataHaveId:n.userDataHaveId,withUi:n.withUi,chunkingMode:n.chunkingMode})}),Unstructured:n=>e.jsxs(r.Suspense,{fallback:e.jsx(A,{}),children:[" ",e.jsx(oe,{withUi:n.withUi,chunkingMode:n.chunkingMode})]})},ge=function(){const[n,i]=r.useState([]),[o,l]=r.useState(null),[m,x]=r.useState(!1),[u,a]=r.useState(z("localAppSetting").chunkingMode),[b,j]=r.useState(!W.draggedFile),[g,d]=r.useState(!1),[D,h]=r.useState(!0),[k,F]=r.useState("json"),[P,N]=r.useState("singleLevel"),f=()=>{l(null),i([])};return e.jsx(e.Fragment,{children:e.jsxs(Q,{children:[e.jsxs(T,{style:{padding:20,alignContent:"center"},children:[e.jsx(C,{text:t("the format of the file :"),testID:"formatOfTheFile",items:[{name:"structured",title:t("structured"),hint:"e.g json",callback:()=>{f(),j(!0)}},{name:"un_structured",title:t("un_structured"),hint:"e.g txt",disabled:!1,callback:()=>{f(),j(!1)}}],default:b?"structured":"un_structured"}),e.jsx(C,{text:t("visualizing while importing or not :"),testID:"visualizion",items:[{name:"with ui",title:t("with ui"),hint:t("slow"),callback:()=>{f(),x(!0)}},{name:"without ui",title:t("without ui"),hint:t("fast"),callback:()=>{f(),x(!1)}}],default:m?"with ui":"without ui"}),e.jsx(C,{text:t("chunking mode:"),testID:"chunkingMode",items:[{name:"static",title:t("static"),hint:t("fast/low quality"),callback:()=>{f(),a("static")}},{name:"semantic",title:t("semantic"),hint:t("medium speed and good quality"),callback:()=>{f(),a("semantic")}},{name:"contexual",title:t("contexual"),hint:t("slower but highest quality"),disabled:!0,callback:()=>{f(),a("contexual")}}],default:u}),b&&e.jsxs(e.Fragment,{children:[e.jsx(C,{testID:"idAvalibility",text:t("does your data have Id ?..."),items:[{name:"yes",title:t("yes"),callback:()=>{f(),h(!0)}},{name:"no",title:t("no"),callback:()=>{f(),h(!1)}}],default:D?"yes":"no"}),e.jsx(C,{text:t("the extension of the file:"),testID:"fileExtension",items:[{name:"json",title:"json",callback:()=>{f(),F("json")}},{name:"csv",title:"csv",disabled:!0,callback:()=>{f(),F("csv")}}],default:k}),e.jsx(C,{text:t("what do you have?"),testID:"dataAvalability",items:[{name:"nodes And Edges",title:t("nodes And Edges"),callback:()=>{f(),d(!0)}},{name:"only nodes",title:t("only nodes"),callback:()=>{f(),d(!1)}}],default:g?"nodes And Edges":"only nodes"}),k==="json"&&!g&&e.jsx(C,{text:t("the structure of the json:"),testID:"jsonStructure",items:[{name:"singleLevel",title:t("singleLevel"),callback:()=>{f(),N("singleLevel")}},{name:"multiLevel",title:t("multiLevel"),disabled:!0,callback:()=>{f(),N("multiLevel")}}],default:P})]}),e.jsx(w,{testID:"importerPluginRecommender",onPress:async()=>{const p=await X({userInputs:{chunkingMode:u,fileExtention:k,json_structure:P,structure:b,nodesAndEdges:g}});i(p)},children:t("recommend an importer plugin")}),e.jsx(v,{}),n.length>0&&e.jsx(_,{children:t("select one of the suggested modes:")}),e.jsx(v,{}),e.jsx(Y,{height:300,children:n.length>0&&n.map((p,H)=>e.jsx(Z.Fragment,{children:e.jsx(G,{style:{backgroundColor:K.configs.colors.userInputs,borderWidth:2,borderStyle:"dotted",borderColor:"black",margin:5,padding:5,overflow:"hidden",height:200},onPress:de=>{U({title:null,content:p.explanation,height:400,dontCenterText:!0})},children:e.jsx(E,{children:e.jsxs(s,{style:{minHeight:200},children:[e.jsxs(E,{style:{},children:[e.jsx(_,{children:p.name}),e.jsx(v,{}),e.jsx(_,{style:{marginLeft:10},children:p.explanation})]}),e.jsxs(E,{style:{position:"absolute",top:25,right:1},children:[e.jsx(w,{mode:"text",testID:`${p.name}_seeMore`,onPress:()=>U({title:null,content:p.explanation,height:400,dontCenterText:!0}),children:t("see more...")}),e.jsx(w,{testID:`${p.name}_select`,mode:"text",onPress:()=>l(p),children:t("select")})]})]})})})},H))}),e.jsx(v,{}),e.jsx(v,{}),!!o?.name&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[t("selected mode:")," ",o.name]}),re[o.name]({chunkingMode:u,userDataHaveId:D,withUi:m})]}),e.jsx(M,{}),e.jsx(M,{}),e.jsx(M,{})]}),e.jsx(v,{})]})})};export{ge as ImportRawData};
