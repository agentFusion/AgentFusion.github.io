import{g as R,r as s,s as P,j as e,D as a,B as l,t as o,C as f,u as M,a as U,b as z,I as G,c as H,d as y,e as $,f as q}from"./osRouter-CBnextF-.js";import{R as J}from"./ResponsiblePage-DOZj9gEB.js";import{I as K,C as L}from"./ImgChoosing-Dz9Oi4n7.js";import{S as i}from"./SaveBox-DCscb94N.js";import"./index-hcwDfSVt.js";import"./AnimatedBox-Brna7_dX.js";import"./FileSelector-CzA7dMQV.js";import"./TextInput-_MPn9zwz.js";const te=R(({topMem:n,localAppSetting:d})=>{const[c,D]=s.useState(d.captionTheImg),[g,b]=s.useState(d.generate_customFields_model),[C,v]=s.useState(null),[r,u]=s.useState(""),[_,x]=s.useState(""),[p,h]=s.useState(""),[j,F]=s.useState(""),[m,S]=s.useState("general"),[B,T]=s.useState([]),[A,V]=s.useState([]),[w,I]=s.useState({}),[k,E]=s.useState(null);return s.useEffect(()=>{if(n?.id){const t=P(n);v(null),T([n.id]),V([""]),u(t),x(""),h(n.tags?.join(" ")),F(n.img??null),I({}),S(n.category??"general")}},[n?.id]),e.jsx(e.Fragment,{children:e.jsxs(J,{containerStyles:{},children:[e.jsx(a,{}),e.jsx(l,{style:{flexDirection:"column",marginBottom:20},children:e.jsx(i,{testID:"addMem_title",label:"*"+o("title"),defaultValue:r,onSave:t=>u(t)})}),e.jsx(l,{style:{flexDirection:"column",marginBottom:20},children:e.jsx(i,{testID:"addMem_category",label:"*"+o("category"),defaultValue:m,onSave:t=>S(t)})}),e.jsx(l,{style:{flexDirection:"column",marginBottom:20},children:e.jsx(i,{style:{height:500},multiline:!0,testID:"addMem_content",defaultValue:_,label:o("content"),onSave:t=>x(t)})}),e.jsx(l,{style:{marginBottom:20},children:e.jsx(i,{testID:"addMem_tags",defaultValue:p,label:o("tags"),onSave:t=>h(t)})}),e.jsx(a,{}),e.jsx(K,{oldImg:null,currentImg:j,onImgUrlChanged:t=>{F(t)},onImgSelect:t=>{E(t)}}),e.jsx(a,{}),e.jsx(f,{testID:"addMem_captionImg",caption:o("caption the image"),defaultValue:c,onChange:t=>{D(t),M({newSetting:{captionTheImg:t}})}}),e.jsx(a,{}),e.jsx(f,{testID:"addMem_improve",caption:o("improve data retrieval and indexing of this mem"),defaultValue:g,onChange:t=>{b(t),M({newSetting:{generate_customFields_model:t}})}}),e.jsx(a,{}),e.jsx(a,{}),e.jsx(L,{default_customFields_user:w??{},onUpdate:t=>{I(structuredClone(t))}}),e.jsx(a,{}),e.jsxs(l,{children:[e.jsx(U,{testID:"addMem_submit",icon:n?.id?"plus-network":"shape-rectangle-plus",mode:"contained",onPress:async()=>{await z({newMemForm:{tags:p,content:_,customFields_user:w,id:C,title:r,category:m,parents_id:B,parents_rel:A,img:j},selectedImg:k??null,captionTheImg:c,generate_customFields_model:g})},disabled:!r||!m||!1,children:o("Add the Memory node")}),n?.id&&e.jsxs(l,{style:{flexDirection:"row"},children:[e.jsx(G,{icon:"help-circle",color:H,style:{margin:0,padding:0,width:"5%"},size:15}),e.jsxs(y,{children:[" ",o("adding as a subset of:")," "]}),e.jsx($,{style:{backgroundColor:q},width:20,height:20,src:`${n.img}`}),e.jsxs(y,{children:["  "," ",n.title_string]})]})]})]})})},["topMem","localAppSetting"]);export{te as AddMem};
